{% extends "shortener/base.html" %}
{% load crispy_forms_tags %}
{% block content %}

  <div id="content-section">
        <form method="POST">  
       <div class="form-row  align-items-center">     
            {% csrf_token %}  
            <fieldset class="col-md-10">
                {{ form|crispy }}
            </fieldset> 
            <div class="col">
                    {% if user.is_authenticated %}
                        <button class="btn btn-outline-info" type="submit">Сократить ссылку</button>
                    {% else %} 
                        <button id="btnPopover" data-toggle="popover" class="btn btn-outline-info" data-content="Войдите, чтобы сократить ссылку" >Сократить ссылку</button>
                        <div id="popover_content_wrapper" style="display: none">
                                <div>This is your difgdfgdfgv content</div>
                            </div>
                        
                    {% endif %}
            </div>
        </div> 
    </form>

    <a href="#" data-toggle="popover" 
    title="Popover Header" 
    data-content="Some content inside the popover">GeeksforGeeks</a> 

    {% if user.is_authenticated %}
    <table class="table table-condensed" style="border-collapse:collapse;" >
        <thead>
            <tr>
                <th>Original URL</th>
                <th>Short URL</th>
                <th>Created</th>                
                <th>All Clicks</th>
            </tr>
        </thead>
        <tbody>           
            {% for site in site_list %}             
            <tr>
                <td><a href="{{ site.url_original }}">{{ site.url_original }}</a></td>
                <td><a href="{{ site.get_short_url }}">{{ request.get_host }}{{ site.get_short_url }}</a></td>
                <td>{{ site.date_created|date:"F d, Y" }}</td>
                <td>{{ site.clicks }}</td>                  
            </tr>
            {% endfor %} 
        </tbody>     
    </table>  
    {% else %} 

    {% endif %}
    
    <script> 
            $(document).ready(function(){ 
                $('#btnPopover').popover(
                    html: true,
                    
                    container: function(){
                        return $('#popover_content_wrapper').html();}
                ); 
            }); 
        </script> 


{% endblock content %}